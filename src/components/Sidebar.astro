---
const navItems = [{ name: "HOME", path: "/", icon: "home" }];

const currentPath = Astro.url.pathname;

// Simple icon mapping
const icons = {
  home: '<path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline>',
};
---

<aside class="sidebar">
  <div class="profile-section">
    <div class="profile-image">
      <img
        src="https://ui-avatars.com/api/?name=The+Core+Dump&background=334155&color=fff&size=128"
        alt="Profile"
      />
    </div>
    <h1 class="site-title">TheCoreDump</h1>
    <p class="site-subtitle">Raw tech insights, unfiltered.</p>
  </div>

  <nav>
    <ul class="nav-list">
      {
        navItems.map((item) => (
          <li>
            <a
              href={item.path}
              class={
                currentPath === item.path ||
                (item.path !== "/" && currentPath.startsWith(item.path))
                  ? "active"
                  : ""
              }
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                set:html={icons[item.icon as keyof typeof icons]}
              />
              <span>{item.name}</span>
            </a>
          </li>
        ))
      }
    </ul>
  </nav>

  <div class="sidebar-footer">
    <div class="social-links">
      <a href="#" aria-label="Github">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path
            d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"
          ></path></svg
        >
      </a>
      <a href="#" aria-label="Twitter">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path
            d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"
          ></path></svg
        >
      </a>
      <a href="#" aria-label="RSS">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          ><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"
          ></path><circle cx="5" cy="19" r="1"></circle></svg
        >
      </a>
    </div>
  </div>
</aside>

<style>
  .sidebar {
    width: 320px;
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    background-color: var(--color-bg-secondary);
    padding: 2rem;
    display: flex;
    flex-direction: column;
    z-index: 100;
    transition: transform 0.3s ease;
  }

  .profile-section {
    margin-bottom: 3rem;
    text-align: left;
  }

  .profile-image img {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    margin-bottom: 1rem;
    border: 2px solid var(--color-border);
  }

  .site-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--color-text-primary);
    margin-bottom: 0.25rem;
    line-height: 1.2;
  }

  .site-subtitle {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    font-style: italic;
  }

  .nav-list {
    list-style: none;
  }

  .nav-list li {
    margin-bottom: 0.5rem;
  }

  .nav-list a {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 0.5rem;
    color: var(--color-text-secondary);
    font-weight: 500;
    font-size: 0.875rem;
    transition: all 0.2s ease;
  }

  .nav-list a:hover {
    color: var(--color-text-primary);
  }

  .nav-list a.active {
    background-color: rgba(255, 255, 255, 0.05);
    color: var(--color-text-primary);
    font-weight: 700;
  }

  .sidebar-footer {
    margin-top: auto;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .social-links {
    display: flex;
    gap: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--color-border);
  }

  .social-links a {
    color: var(--color-text-secondary);
    transition: color 0.2s ease;
  }

  .social-links a:hover {
    color: var(--color-text-primary);
  }

  @media (max-width: 768px) {
    .sidebar {
      transform: translateX(-100%);
      width: 280px;
    }

    .sidebar.open {
      transform: translateX(0);
    }
  }
</style>
